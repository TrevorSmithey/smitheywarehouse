@import "tailwindcss";

@theme inline {
  /* ========================================
     SMITHEY OPERATIONS DESIGN SYSTEM
     ======================================== */

  /* BACKGROUNDS - Depth hierarchy for dark theme */
  --color-bg-primary: #0B0E1A;      /* Base canvas */
  --color-bg-secondary: #12151F;    /* Card surfaces */
  --color-bg-tertiary: #1A1D2A;     /* Elevated elements, hover states */

  /* TEXT - Information hierarchy */
  --color-text-primary: #FFFFFF;    /* Headlines, key metrics */
  --color-text-secondary: #94A3B8;  /* Labels, descriptions */
  --color-text-tertiary: #64748B;   /* De-emphasized, reference data */
  --color-text-muted: #475569;      /* Nearly invisible, decorative */

  /* BORDERS */
  --color-border: rgba(255, 255, 255, 0.06);
  --color-border-subtle: rgba(255, 255, 255, 0.03);
  --color-border-hover: rgba(255, 255, 255, 0.1);

  /* ACCENT - Primary data color (single accent for focus) */
  --color-accent-blue: #0EA5E9;     /* Primary data, active states, links */
  --color-accent-blue-dim: #0284C7; /* Darker variant for gradients */
  --color-accent-cyan: #06B6D4;     /* Secondary accent (use sparingly) */

  /* STATUS - ONLY for status indication */
  --color-status-good: #10B981;     /* On-track, healthy, within target */
  --color-status-good-dim: #059669; /* Darker variant for gradients */
  --color-status-warning: #F59E0B;  /* Needs attention, approaching limit */
  --color-status-warning-dim: #D97706;
  --color-status-bad: #DC2626;      /* Problem, behind target, urgent */
  --color-status-bad-dim: #B91C1C;  /* Darker variant for gradients */

  /* REFERENCE - For grid lines, targets, baselines */
  --color-reference: #94A3B8;       /* Target lines, reference values */
  --color-reference-dim: #64748B;   /* Subtle reference elements */
  --color-axis: #1E293B;            /* Axis lines (barely visible) */

  /* FORGE PALETTE - Assembly/Production specific */
  --color-forge-copper: #D97706;
  --color-forge-ember: #EA580C;
  --color-forge-iron: #78716C;
  --color-forge-glow: #FCD34D;
  --color-forge-heat: #F59E0B;

  /* TYPOGRAPHY */
  --font-inter: 'Inter', sans-serif;

  /* Custom Font Sizes */
  --text-metric: 42px;
  --text-label: 11px;
  --text-context: 13px;

  /* Letter Spacing */
  --tracking-tight-sm: -0.02em;
  --tracking-wide-sm: 0.1em;

  /* Shadows */
  --shadow-card: 0 1px 3px rgba(0, 0, 0, 0.2);
  --shadow-card-hover: 0 4px 6px rgba(0, 0, 0, 0.3);
}

@layer base {
  * {
    -webkit-tap-highlight-color: transparent;
    -webkit-touch-callout: none;
  }

  html {
    /* Prevent pull-to-refresh and overscroll bounce on mobile */
    overscroll-behavior: none;
  }

  body {
    /* Prevent pull-to-refresh gesture */
    overscroll-behavior-y: none;
  }

  button, a, input[type="button"], input[type="submit"], label[for] {
    touch-action: manipulation;
    /* Ensure buttons respond instantly */
    user-select: none;
    -webkit-user-select: none;
  }

  /* Smooth scrolling for horizontal scroll containers on iOS */
  .overflow-x-auto {
    -webkit-overflow-scrolling: touch;
    scrollbar-width: none; /* Firefox */
    -ms-overflow-style: none; /* IE/Edge */
  }

  .overflow-x-auto::-webkit-scrollbar {
    display: none; /* Chrome/Safari */
  }
}

body {
  font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',
    'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  background-color: var(--color-bg-primary);
  color: var(--color-text-primary);
}

/* Soft pulse animation for status dots */
@keyframes soft-pulse {
  0%, 100% {
    opacity: 1;
    box-shadow: 0 0 0 0 currentColor;
  }
  50% {
    opacity: 0.7;
    box-shadow: 0 0 4px 1px currentColor;
  }
}

.animate-soft-pulse {
  animation: soft-pulse 2s ease-in-out infinite;
}

/* Utility Classes for Design System */
@layer utilities {
  .text-metric {
    font-size: var(--text-metric);
    line-height: 1;
  }

  .text-label {
    font-size: var(--text-label);
    text-transform: uppercase;
    letter-spacing: var(--tracking-wide-sm);
  }

  .text-context {
    font-size: var(--text-context);
  }

  .tracking-tight-sm {
    letter-spacing: var(--tracking-tight-sm);
  }

  .tracking-wide-sm {
    letter-spacing: var(--tracking-wide-sm);
  }

  .shadow-card {
    box-shadow: var(--shadow-card);
  }

  .shadow-card-hover {
    box-shadow: var(--shadow-card-hover);
  }

  /* Scrollbar styling - thin, subtle ember-tinted scrollbar */
  .scrollbar-thin {
    scrollbar-width: thin;
    scrollbar-color: rgba(249, 115, 22, 0.15) transparent;
  }

  .scrollbar-thin::-webkit-scrollbar {
    width: 3px;
  }

  .scrollbar-thin::-webkit-scrollbar-track {
    background: transparent;
  }

  .scrollbar-thin::-webkit-scrollbar-thumb {
    background: rgba(249, 115, 22, 0.12);
    border-radius: 3px;
  }

  .scrollbar-thin:hover::-webkit-scrollbar-thumb {
    background: rgba(249, 115, 22, 0.25);
  }

  .scrollbar-thin::-webkit-scrollbar-thumb:hover {
    background: rgba(249, 115, 22, 0.4);
  }
}

/* Safety stock violation - subtle slow pulsing amber */
.ss-violation {
  animation: ss-pulse 4s ease-in-out infinite;
}

@keyframes ss-pulse {
  0%, 100% {
    background-color: rgba(251, 191, 36, 0.06);
  }
  50% {
    background-color: rgba(251, 191, 36, 0.14);
  }
}

/* Ensure animation persists on hover */
tr.ss-violation:hover {
  animation: ss-pulse 4s ease-in-out infinite;
}

/* ========================================
   INFO TOOLTIP SYSTEM
   ========================================
   Prefixed with "info-" to avoid conflicts with
   third-party libraries (Recharts, etc).

   Usage:
   <span class="info-tip">
     <Info class="info-tip-icon" />
     <span class="info-tip-popup info-tip-bottom">
       Tooltip text here
       <span class="info-tip-arrow"></span>
     </span>
   </span>
   ======================================== */

/* Trigger container - uses group hover, NO cursor change */
.info-tip {
  position: relative;
  display: inline-flex;
  align-items: center;
}

/* Icon styling - subtle, highlights on hover */
.info-tip-icon {
  width: 0.75rem;  /* w-3 */
  height: 0.75rem;
  color: var(--color-text-muted);
  opacity: 0.4;
  transition: color 150ms ease, opacity 150ms ease;
  flex-shrink: 0;
}

.info-tip:hover .info-tip-icon {
  color: var(--color-accent-blue);
  opacity: 1;
}

/* Tooltip popup - hidden by default */
.info-tip-popup {
  position: absolute;
  z-index: 100;
  padding: 0.5rem 0.625rem;  /* py-2 px-2.5 */
  border-radius: 0.375rem;  /* rounded-md */
  background-color: #1a1a1a;
  font-size: 11px;
  color: rgba(255, 255, 255, 0.9);
  font-weight: 400;
  line-height: 1.4;
  white-space: nowrap;
  pointer-events: none;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);
  border: 1px solid rgba(255, 255, 255, 0.05);

  /* Hidden state */
  opacity: 0;
  transform: scale(0.95);
  transition: opacity 150ms ease, transform 150ms ease;
}

/* Show on hover */
.info-tip:hover .info-tip-popup {
  opacity: 1;
  transform: scale(1);
}

/* Position variants */
.info-tip-top {
  bottom: 100%;
  left: 50%;
  transform: translateX(-50%) scale(0.95);
  margin-bottom: 0.5rem;
}

.info-tip:hover .info-tip-top {
  transform: translateX(-50%) scale(1);
}

.info-tip-bottom {
  top: 100%;
  left: 0;
  margin-top: 0.375rem;
}

/* Arrow styling */
.info-tip-arrow {
  position: absolute;
  border: 5px solid transparent;
}

/* Arrow for top-positioned tooltip (points down) */
.info-tip-top .info-tip-arrow {
  top: 100%;
  left: 50%;
  transform: translateX(-50%);
  border-top-color: #1a1a1a;
  margin-top: -1px;
}

/* Arrow for bottom-positioned tooltip (points up) */
.info-tip-bottom .info-tip-arrow {
  bottom: 100%;
  left: 0.75rem;
  border-bottom-color: #1a1a1a;
}

/* ========================================
   RECHARTS FIX
   ========================================
   Prevents "width(-1) and height(-1)" console warnings
   during initial render/hydration.

   ResponsiveContainer needs measured dimensions from its
   parent. This ensures the wrapper always has positive
   dimensions during the initial layout phase.

   Also removes browser focus outlines from chart elements
   that can appear when tabbing or interacting with charts.
   ======================================== */
.recharts-responsive-container {
  min-width: 1px;
  min-height: 1px;
}

.recharts-responsive-container,
.recharts-responsive-container *,
.recharts-wrapper,
.recharts-wrapper *,
.recharts-surface,
.recharts-surface * {
  outline: none !important;
}

/* ========================================
   SMITHEY QUAIL ANIMATIONS
   ======================================== */

/* Gentle pecking motion for loading quail */
@keyframes peck {
  0%, 100% {
    transform: rotate(0deg);
  }
  15% {
    transform: rotate(12deg);
  }
  30% {
    transform: rotate(0deg);
  }
  45% {
    transform: rotate(10deg);
  }
  60% {
    transform: rotate(0deg);
  }
  /* Pause between pecks */
}

.animate-peck {
  animation: peck 2.5s ease-in-out infinite;
}

/* Subtle idle sway for quail */
@keyframes idle-sway {
  0%, 100% {
    transform: translateX(0);
  }
  50% {
    transform: translateX(2px);
  }
}

.animate-idle-sway {
  animation: idle-sway 3s ease-in-out infinite;
}

/* Shake animation for wrong PIN */
@keyframes shake {
  0%, 100% {
    transform: translateX(0);
  }
  10%, 30%, 50%, 70%, 90% {
    transform: translateX(-4px);
  }
  20%, 40%, 60%, 80% {
    transform: translateX(4px);
  }
}

.animate-shake {
  animation: shake 0.5s ease-in-out;
}

/* Happy bounce for successful login */
@keyframes quail-bounce {
  0%, 100% {
    transform: translateY(0);
  }
  50% {
    transform: translateY(-8px);
  }
}

.animate-quail-bounce {
  animation: quail-bounce 0.4s ease-in-out 3;
}

/* Fade in animation for login success */
@keyframes fade-in {
  0% {
    opacity: 0;
    transform: translateY(10px);
  }
  100% {
    opacity: 1;
    transform: translateY(0);
  }
}

.animate-fade-in {
  animation: fade-in 0.6s ease-out forwards;
}
